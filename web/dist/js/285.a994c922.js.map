{"version":3,"file":"js/285.a994c922.js","mappings":"mJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,SAASC,MAAM,CAAC,GAAK,UAAUL,EAAIM,KAAKC,IAAIC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIU,gBAAgBV,EAAIM,KAAKC,GAAG,IAAI,CAACL,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,OAAO,CAACF,EAAIW,GAAG,KAAKX,EAAIY,GAAGZ,EAAIM,KAAKC,GAAK,MAAML,EAAG,OAAO,CAACF,EAAIW,GAAG,KAAKX,EAAIY,GAAGZ,EAAIM,KAAKO,aAAaX,EAAG,cAAc,CAACG,MAAM,CAAC,KAAOL,EAAIc,MAAMN,GAAG,CAAC,sBAAwB,SAASC,GAAQ,OAAOT,EAAIe,uBAAuB,IAAI,CAACf,EAAIW,GAAGX,EAAIY,GAAGZ,EAAIc,UAAU,GAAGZ,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,OAAO,SAAW,YAAYW,SAAS,CAAC,MAAQhB,EAAIM,KAAKW,WAAWf,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,SAAS,CAACE,YAAY,OAAOI,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIkB,KAAKT,EAAQT,EAAIM,KAAKC,GAAG,IAAI,CAACP,EAAIW,GAAG,QAAQT,EAAG,SAAS,CAACE,YAAY,SAASI,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAImB,eAAenB,EAAIM,KAAKC,GAAG,IAAI,CAACP,EAAIW,GAAG,QAAQT,EAAG,IAAI,CAACE,YAAY,iBAAiBC,MAAM,CAAC,KAAOJ,KAAKmB,OAAO,CAACpB,EAAIW,GAAG,WACx6B,EACIU,EAAkB,GCFlBtB,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACoB,IAAI,MAAMlB,YAAY,OAAO,CAACF,EAAG,OAAO,CAACF,EAAIW,GAAGX,EAAIY,GAAGZ,EAAIc,SAASZ,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,SAAS,CAACqB,MAAO,WAAWvB,EAAIwB,OAAQhB,GAAG,CAAC,MAAQR,EAAIyB,YAAY,CAACzB,EAAIW,GAAG,QAAQX,EAAIY,GAAGZ,EAAI0B,cACpR,EACIL,EAAkB,GCQtB,GACAM,MAAA,CACAb,KAAA,CACAA,KAAAc,OACAC,UAAA,GAUAC,KAAA,CACAhB,KAAAiB,QACAF,UAAA,EACAG,SAAA,IAGAC,OAAAA,GACAC,QAAAC,IAAA,KAAArB,MACA,YAAAA,MACA,KAAAsB,MAAAC,IAAAC,UAAAC,IAAA,aACA,KAAAb,OAAA,MACA,YAAAZ,MACA,KAAAsB,MAAAC,IAAAC,UAAAC,IAAA,YACA,KAAAb,OAAA,MACA,YAAAZ,OACA,KAAAsB,MAAAC,IAAAC,UAAAC,IAAA,UACA,KAAAb,OAAA,KAEA,EACApB,IAAAA,GACA,OACAkC,eAAA,iBACAd,OAAA,KAEA,EACAe,QAAA,CACAhB,SAAAA,GACAS,QAAAC,IAAA,aACA,KAAAO,MAAA,wBACA,GAEAC,SAAA,CACAnB,MAAAA,GACA,kBAAAV,MAAA,KAAAgB,KACA,SAEA,MAEA,IC9DyP,I,UCQrPc,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAeA,EAAiB,QCDhC,GACAjB,MAAA,CACArB,KAAA,CACAQ,KAAA+B,OACAhB,UAAA,GAEAf,KAAA,CACAA,KAAAc,QAEAkB,SAAA,CACAhC,KAAAc,SAGAmB,WAAA,CACA,WAAAC,GAEAP,QAAA,CACA/B,eAAAA,CAAAH,GACA2B,QAAAC,IAAA,yBACA,KAAAO,MAAA,kBAAAnC,EACA,EACAW,IAAAA,CAAA+B,EAAA1C,GACA0C,EAAAC,cAAAC,WAAAC,uBAAAC,UAAAJ,EAAAC,cAAAC,WAAAC,uBAAAC,SAEA,GAAAJ,EAAAC,cAAAC,WAAAC,uBAAAC,UAMA,KAAAX,MAAA,OAAAnC,EAAA0C,EAAAC,cAAAC,WAAAC,uBAAAE,MAEA,EACAnC,cAAAA,CAAAZ,GACA,KAAAmC,MAAA,iBAAAnC,EACA,EACAQ,qBAAAA,GACAmB,QAAAC,IAAA,WACA,KAAAO,MAAA,qBACA,GAEAa,OAAAA,GACA,UAAAT,eAAAU,IAAA,KAAAV,UAAA,YAAAA,SACA,KAAA1B,KAAA,KAAAqC,OAAAC,KAAA,eAAApD,KAAAO,SAEA,KAAAO,KAAA,gBAAA0B,SAAA,eAAAxC,KAAAO,SAEAqB,QAAAC,IAAA,KAAAf,KACA,EACAd,IAAAA,GACA,OACAc,KAAA,GAEA,GCvE2P,ICQvP,GAAY,OACd,EACArB,EACAsB,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,O,oECnBhC,IAAItB,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,OAAO,CAACF,EAAIW,GAAG,UAAUT,EAAG,SAAS,CAACyD,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUP,MAAOtD,EAAI8C,SAAUgB,WAAW,aAAazD,MAAM,CAAC,KAAO,SAASW,SAAS,CAAC,MAAQhB,EAAI+D,UAAU,IAAIvD,GAAG,CAAC,OAAS,SAASC,GAAQ,IAAIuD,EAAgBC,MAAMC,UAAUC,OAAOC,KAAK3D,EAAO4D,OAAOC,SAAQ,SAASC,GAAG,OAAOA,EAAEC,QAAQ,IAAGC,KAAI,SAASF,GAAG,IAAIG,EAAM,WAAYH,EAAIA,EAAEI,OAASJ,EAAEjB,MAAM,OAAOoB,CAAG,IAAI1E,EAAI8C,SAASrC,EAAO4D,OAAOO,SAAWZ,EAAgBA,EAAc,EAAE,IAAI,CAAC9D,EAAG,SAAS,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACL,EAAIW,GAAG,SAASX,EAAI6E,GAAI7E,EAAI+D,WAAW,SAASH,EAAKkB,GAAO,OAAO5E,EAAG,SAAS,CAAC6E,IAAID,GAAO,CAAC9E,EAAIW,GAAGX,EAAIY,GAAGgD,KAAQ,KAAI,KAAK1D,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,OAAO,CAACF,EAAIW,GAAG,UAAUT,EAAG,QAAQ,CAACyD,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUP,MAAOtD,EAAIgF,WAAYlB,WAAW,eAAezD,MAAM,CAAC,KAAO,QAAQW,SAAS,CAAC,MAAShB,EAAIgF,YAAaxE,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAO4D,OAAOY,YAAiBjF,EAAIgF,WAAWvE,EAAO4D,OAAOf,MAAK,OAAOpD,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,OAAO,CAACF,EAAIW,GAAG,UAAUT,EAAG,SAAS,CAACyD,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUP,MAAOtD,EAAIc,KAAMgD,WAAW,SAASzD,MAAM,CAAC,KAAO,SAASG,GAAG,CAAC,OAAS,SAASC,GAAQ,IAAIuD,EAAgBC,MAAMC,UAAUC,OAAOC,KAAK3D,EAAO4D,OAAOC,SAAQ,SAASC,GAAG,OAAOA,EAAEC,QAAQ,IAAGC,KAAI,SAASF,GAAG,IAAIG,EAAM,WAAYH,EAAIA,EAAEI,OAASJ,EAAEjB,MAAM,OAAOoB,CAAG,IAAI1E,EAAIc,KAAKL,EAAO4D,OAAOO,SAAWZ,EAAgBA,EAAc,EAAE,IAAI,CAAC9D,EAAG,SAAS,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACL,EAAIW,GAAG,SAAST,EAAG,SAAS,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACL,EAAIW,GAAG,QAAQT,EAAG,SAAS,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACL,EAAIW,GAAG,QAAQT,EAAG,SAAS,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACL,EAAIW,GAAG,cAAcT,EAAG,MAAMA,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,KAAK,CAACF,EAAI6E,GAAI7E,EAAIkF,eAAe,SAAS5E,EAAKwE,GAAO,OAAO5E,EAAG,MAAM,CAAC6E,IAAID,EAAMxD,IAAI,SAAS6D,UAAS,EAAK/E,YAAY,kBAAkBC,MAAM,CAAC,GAAK,UAAUyE,GAAOtE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIU,gBAAgBoE,EAAOxE,EAAKwC,SAAS,IAAI,CAAC5C,EAAG,OAAO,CAACF,EAAIW,GAAGX,EAAIY,GAAGN,EAAKwC,UAAU,OAAO5C,EAAG,gBAAgB,CAACG,MAAM,CAAC,KAAOC,EAAK,KAAOA,EAAKQ,KAAK,SAAWR,EAAKwC,UAAUtC,GAAG,CAAC,gBAAkB,SAASC,GAAQ,OAAOT,EAAIU,gBAAgBoE,EAAOxE,EAAKwC,SAAS,EAAE,KAAO9C,EAAIoF,SAAS,eAAiBpF,EAAIoF,aAAa,EAAE,IAAGlF,EAAG,MAAM,CAACmF,YAAY,CAAC,MAAQ,OAAO,OAAS,YAAY,KAAKnF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,SAAS,CAACE,YAAY,MAAMI,GAAG,CAAC,MAAQR,EAAIuC,MAAM,CAACvC,EAAIW,GAAG,WACtgF,EACIU,EAAkB,G,6EC0CtB,GACAuC,KAAA,aACAtD,IAAAA,GACA,OACAQ,KAAA,MACAgC,SAAA,MACAwC,SAAA,GACAvB,UAAA,GACAmB,cAAA,GACAK,eAAA,EACAC,gBAAA,GACAR,WAAA,GAEA,EACAjC,WAAA,CACA,aAAA0C,EAAAA,GAEA,aAAAlC,GACA,MAAAmC,QAAAC,EAAAA,EAAAA,GAAA,CACAC,IAAA,2CAEA,KAAAN,SAAAI,EAAApF,KACA4B,QAAAC,IAAA,KAAAmD,SAAA,IACA,KAAAvB,UAAA,KAAAuB,SAAAb,KAAAoB,GAAAA,EAAA/C,WACA,KAAAiB,UAAAE,MAAA6B,KAAA,IAAAC,IAAA,KAAAhC,YAEA,KAAAmB,cAAA,KAAAI,QACA,EACA7C,QAAA,CACAF,GAAAA,GACA,KAAAG,MAAA,WAAA8C,gBAAA,KAAAN,cAAA,KAAAK,eAAAhF,GACA,EACAyF,YAAAA,GACA9D,QAAAC,IAAA,gBACA,EACAiD,QAAAA,GACAa,MAAA,4BACA,EACAvF,eAAAA,CAAAoE,EAAAhC,GACAZ,QAAAC,IAAA,QACA,KAAAoD,cAAAT,EACA,KAAAU,gBAAA1C,CACA,EACAoD,MAAAA,GACA,YAAApF,OACA,KAAAoE,cAAA,KAAAA,cAAAf,QAAA0B,GAAAA,EAAA/E,OAAA,KAAAA,OAEA,EACAqF,mBAAAA,GACA,YAAArD,SACA,YAAAhC,KACA,KAAAoE,cAAA,KAAAI,SAAAnB,QAAA0B,GAAAA,EAAA/C,UAAA,KAAAA,UAAA+C,EAAA/E,MAAA,KAAAA,MAAA+E,EAAA5E,QAAAmF,SAAA,KAAApB,cAEA,KAAAE,cAAA,KAAAI,SAAAnB,QAAA0B,GAAAA,EAAA/C,UAAA,KAAAA,UAAA+C,EAAA5E,QAAAmF,SAAA,KAAApB,cAGA,YAAAlE,KACA,KAAAoE,cAAA,KAAAI,SAAAnB,QAAA0B,GAAAA,EAAA/E,MAAA,KAAAA,MAAA+E,EAAA5E,QAAAmF,SAAA,KAAApB,cAEA,KAAAE,cAAA,KAAAI,SAAAnB,QAAA0B,GAAAA,EAAA5E,QAAAmF,SAAA,KAAApB,aAGA,GAEAqB,MAAA,CACAvD,SAAA,CACAwD,OAAAA,GACA,KAAAH,qBACA,GAEArF,KAAA,CACAwF,OAAAA,GACA,KAAAH,qBACA,GAEAnB,WAAA,CACAsB,OAAAA,GACA,KAAAH,qBACA,GAEAZ,aAAAA,CAAAgB,EAAAC,GACAtE,QAAAC,IAAAoE,GACA,KAAAnE,MAAAqE,OAAAF,GAAAjE,UAAAC,IAAA,kBACA,GAAAiE,GACA,KAAApE,MAAAqE,OAAAD,GAAAlE,UAAAoE,OAAA,gBAGA,ICnIuP,I,UCQnP9D,GAAY,OACd,EACA7C,EACAsB,GACA,EACA,KACA,WACA,MAIF,EAAeuB,EAAiB,O","sources":["webpack://vue2router/./src/components/SingleMargin.vue","webpack://vue2router/./src/components/MarginType.vue","webpack://vue2router/src/components/MarginType.vue","webpack://vue2router/./src/components/MarginType.vue?7d29","webpack://vue2router/./src/components/MarginType.vue?3393","webpack://vue2router/src/components/SingleMargin.vue","webpack://vue2router/./src/components/SingleMargin.vue?163b","webpack://vue2router/./src/components/SingleMargin.vue?48df","webpack://vue2router/./src/views/Comments.vue","webpack://vue2router/src/views/Comments.vue","webpack://vue2router/./src/views/Comments.vue?2ac7","webpack://vue2router/./src/views/Comments.vue?6a3e"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"dialog\",attrs:{\"id\":'comment'+_vm.data.id},on:{\"click\":function($event){return _vm.setChosenMargin(_vm.data.id)}}},[_c('div',{staticClass:\"info\"},[_c('span',[_vm._v(\"注释\"+_vm._s(_vm.data.id + 1))]),_c('span',[_vm._v(\"位置\"+_vm._s(_vm.data.position))]),_c('margin-type',{attrs:{\"type\":_vm.type},on:{\"displaySelectionPanel\":function($event){return _vm.displaySelectionPanel()}}},[_vm._v(_vm._s(_vm.type))])],1),_c('textarea',{attrs:{\"type\":\"text\",\"disabled\":\"disabled\"},domProps:{\"value\":_vm.data.content}}),_c('div',{staticClass:\"buttons\"},[_c('button',{staticClass:\"edit\",on:{\"click\":function($event){return _vm.edit($event, _vm.data.id)}}},[_vm._v(\"编辑\")]),_c('button',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.deleteComments(_vm.data.id)}}},[_vm._v(\"删除\")]),_c('a',{staticClass:\"dialog-content\",attrs:{\"href\":this.link}},[_vm._v(\"跳转\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"tag\",staticClass:\"tag\"},[_c('span',[_vm._v(_vm._s(_vm.type))]),_c('div',{staticClass:\"answer\"},[_c('button',{style:('display:'+_vm.hidden),on:{\"click\":_vm.addAnswer}},[_vm._v(\"查看/添加\"+_vm._s(_vm.answer))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"tag\" ref=\"tag\">\r\n    <span>{{type}}</span>\r\n    <div class=\"answer\">\r\n      <button @click=\"addAnswer\" :style=\"'display:'+hidden\">查看/添加{{answer}}</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    type: {\r\n      type: String,\r\n      required: true,\r\n      // validator (value) {\r\n      //   for (const i of this.availableTypes) {\r\n      //     if (value === i){\r\n      //       return true\r\n      //     }\r\n      //   }\r\n      //   return false\r\n      // }\r\n    },\r\n    hide: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: true\r\n    }\r\n  },\r\n  mounted () {\r\n    console.log(this.type)\r\n    if (this.type === \"推测\") {\r\n      this.$refs.tag.classList.add(\"inference\")\r\n      this.answer = \"关联\"\r\n    } else if (this.type === \"疑点\") {\r\n      this.$refs.tag.classList.add(\"question\")\r\n      this.answer = \"解答\"\r\n    } else if (this.type === \"批注\") {\r\n      this.$refs.tag.classList.add(\"margin\")\r\n      this.answer = \"关联\"\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      availableTypes: ['推测', '疑点', '批注'],\r\n      answer: \"解答\"\r\n    }\r\n  },\r\n  methods: {\r\n    addAnswer(){\r\n      console.log(\"addAnswer\")\r\n      this.$emit('displaySelectionPanel')\r\n    }\r\n  },\r\n  computed: {\r\n    hidden(){\r\n      if (this.type === \"疑点\" && this.hide){\r\n        return \"hidden\"\r\n      } else {\r\n        return \"none\"\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.question {\r\n  color: white;\r\n  background-color: darkred;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.inference {\r\n  color: white;\r\n  background-color: #6B8E23;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.margin {\r\n  color: white;\r\n  background-color: #6495ED;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MarginType.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MarginType.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MarginType.vue?vue&type=template&id=6d5074f7&scoped=true\"\nimport script from \"./MarginType.vue?vue&type=script&lang=js\"\nexport * from \"./MarginType.vue?vue&type=script&lang=js\"\nimport style0 from \"./MarginType.vue?vue&type=style&index=0&id=6d5074f7&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d5074f7\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"dialog\" @click=\"setChosenMargin(data.id)\" :id=\"'comment'+data.id\">\r\n    <div class=\"info\">\r\n        <span>注释{{data.id + 1}}</span>\r\n        <span>位置{{data.position}}</span>\r\n        <margin-type :type=\"type\" @displaySelectionPanel=\"displaySelectionPanel()\">{{type}}</margin-type>\r\n    </div>\r\n    <textarea type=\"text\" disabled=\"disabled\" :value=\"data.content\"></textarea>\r\n    <div class=\"buttons\">\r\n        <button class=\"edit\" @click=\"edit($event, data.id)\">编辑</button>\r\n        <button class=\"delete\" @click=\"deleteComments(data.id)\">删除</button>\r\n        <a :href=\"this.link\" class=\"dialog-content\">跳转</a>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MarginType from './MarginType.vue'\r\nexport default {\r\n  props: {\r\n    data: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    type: {\r\n      type: String\r\n    },\r\n    filename: {\r\n      type: String\r\n    }\r\n  },\r\n  components: {\r\n    'marginType': MarginType\r\n  },\r\n  methods: {\r\n    setChosenMargin (id) {\r\n      console.log(\"changed chosen margin\")\r\n      this.$emit('setChosenMargin', id)\r\n    },\r\n    edit(e, id) {\r\n      e.currentTarget.parentNode.previousElementSibling.disabled = !e.currentTarget.parentNode.previousElementSibling.disabled;\r\n      // console.log(e.currentTarget.parentNode.previousElementSibling.disabled)\r\n      if (e.currentTarget.parentNode.previousElementSibling.disabled == true){\r\n          // for (i in this.comments){\r\n          //     if (this.comments[i].id == id){\r\n          //         this.comments[i].content = e.currentTarget.parentNode.previousElementSibling.value\r\n          //     }\r\n          // }\r\n        this.$emit('edit', id, e.currentTarget.parentNode.previousElementSibling.value)\r\n      }\r\n    },\r\n    deleteComments(id){\r\n      this.$emit(\"deleteComments\", id)\r\n    },\r\n    displaySelectionPanel(){\r\n      console.log(\"display\")\r\n      this.$emit(\"showSelectionModal\")\r\n    }\r\n  },\r\n  created () {\r\n    if (this.filename === \"\" || this.filename === undefined || this.filename === null){\r\n      this.link = this.$route.path+'#dialog'+this.data.position\r\n    } else {\r\n      this.link = \"/search/\" + this.filename +'#dialog'+this.data.position\r\n    }\r\n    console.log(this.link)\r\n  },\r\n  data () {\r\n    return {\r\n      link: \"\"\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.buttons{\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: left;\r\n}\r\n.buttons button{\r\n    margin: 10px;\r\n    height: 40px;\r\n    width: 100%;\r\n}\r\n\r\n.dialog textarea{\r\n  height:100px;\r\n  width: 90%;\r\n  margin: 4%;\r\n  background-color: white;\r\n  font-weight:400;\r\n  color: black;\r\n  resize: none;\r\n}\r\n\r\n.dialog{\r\n  width: 100%;;\r\n  height: max-content;\r\n  position: relative;\r\n  border: solid 1px black;\r\n  border-radius: 5px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.dialog .info .type{\r\n  height: max-content;\r\n  width: max-content;\r\n  position: absolute;\r\n  right: 0px;\r\n  margin-left: 10px;\r\n  background-color: pink;\r\n}\r\n\r\n.active-margin{\r\n  box-shadow:0 15px 35px rgba(0,0,0,0.5);\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SingleMargin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SingleMargin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SingleMargin.vue?vue&type=template&id=7b32d8cd&scoped=true\"\nimport script from \"./SingleMargin.vue?vue&type=script&lang=js\"\nexport * from \"./SingleMargin.vue?vue&type=script&lang=js\"\nimport style0 from \"./SingleMargin.vue?vue&type=style&index=0&id=7b32d8cd&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b32d8cd\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"comments\"},[_c('div',{staticClass:\"condition\"},[_c('div',{staticClass:\"condition-wrapper\"},[_c('span',[_vm._v(\"剧情名称\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filename),expression:\"filename\"}],attrs:{\"type\":\"radio\"},domProps:{\"value\":_vm.filenames[0]},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.filename=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"all\"}},[_vm._v(\"all\")]),_vm._l((_vm.filenames),function(name,index){return _c('option',{key:index},[_vm._v(_vm._s(name))])})],2)]),_c('div',{staticClass:\"condition-wrapper\"},[_c('span',[_vm._v(\"查找内容\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchText),expression:\"searchText\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.searchText)},on:{\"input\":function($event){if($event.target.composing)return;_vm.searchText=$event.target.value}}})]),_c('div',{staticClass:\"condition-wrapper\"},[_c('span',[_vm._v(\"批注类型\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.type),expression:\"type\"}],attrs:{\"type\":\"radio\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.type=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"all\"}},[_vm._v(\"all\")]),_c('option',{attrs:{\"value\":\"疑点\"}},[_vm._v(\"疑点\")]),_c('option',{attrs:{\"value\":\"推测\"}},[_vm._v(\"推测\")]),_c('option',{attrs:{\"value\":\"批注\"}},[_vm._v(\"批注\")])])])]),_c('br'),_c('div',{staticClass:\"comment-list\"},[_c('ul',[_vm._l((_vm.temp_comments),function(data,index){return _c('div',{key:index,ref:\"margin\",refInFor:true,staticClass:\"comment-wrapper\",attrs:{\"id\":'comment'+index},on:{\"click\":function($event){return _vm.setChosenMargin(index, data.filename)}}},[_c('span',[_vm._v(_vm._s(data.filename)+\":\")]),_c('single-margin',{attrs:{\"data\":data,\"type\":data.type,\"filename\":data.filename},on:{\"setChosenMargin\":function($event){return _vm.setChosenMargin(index, data.filename)},\"edit\":_vm.notAlter,\"deleteComments\":_vm.notAlter}})],1)}),_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"400px\"}})],2)]),_c('div',{staticClass:\"footer\"},[_c('button',{staticClass:\"add\",on:{\"click\":_vm.add}},[_vm._v(\"添加\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"comments\">\r\n        <div class=\"condition\">\r\n            <div class=\"condition-wrapper\">\r\n                <span>剧情名称</span>\r\n                <select v-model=\"filename\" type=\"radio\" :value=\"filenames[0]\">\r\n                    <option value=\"all\">all</option>\r\n                    <option v-for=\"(name, index) in filenames\" :key=\"index\">{{name}}</option>\r\n                </select>\r\n            </div>\r\n            <div class=\"condition-wrapper\">\r\n                <span>查找内容</span>\r\n                <input type=\"text\" v-model=\"searchText\">\r\n            </div>\r\n            <div class=\"condition-wrapper\">\r\n                <span>批注类型</span>\r\n                <select v-model=\"type\" type=\"radio\">\r\n                    <option value=\"all\">all</option>\r\n                    <option value=\"疑点\">疑点</option>\r\n                    <option value=\"推测\">推测</option>\r\n                    <option value=\"批注\">批注</option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div class=\"comment-list\">\r\n            <ul>\r\n                <div v-for=\"(data, index) in temp_comments\" :key=\"index\" class=\"comment-wrapper\" :id=\"'comment'+index\" ref=\"margin\" @click=\"setChosenMargin(index, data.filename)\">\r\n                    <span>{{data.filename}}:</span>\r\n                    <single-margin :data=\"data\" :type=\"data.type\" @setChosenMargin=\"setChosenMargin(index, data.filename)\" @edit=\"notAlter\" @deleteComments=\"notAlter\" :filename=\"data.filename\"></single-margin>\r\n                </div>\r\n                <div style=\"width: 100%; height: 400px;\"></div> \r\n            </ul>\r\n        </div>\r\n        <div class=\"footer\">\r\n            <button class=\"add\" @click=\"add\">添加</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport SingleMargin from '@/components/SingleMargin.vue';\r\n// import SingleMargin from '../components/SingleMargin.vue';\r\nimport axios from 'axios';\r\nexport default {\r\n    name: `BaseFriend`,\r\n    data() {\r\n        return {\r\n            type: \"all\",\r\n            filename: \"all\",\r\n            comments: [],\r\n            filenames: [],\r\n            temp_comments: [],\r\n            chosen_margin: -1,\r\n            chosen_filename: \"\",\r\n            searchText: \"\"\r\n        }\r\n    },\r\n    components: {\r\n        'SingleMargin': SingleMargin\r\n    },\r\n    async created() {\r\n        const res = await axios({\r\n            url: \"http://127.0.0.1:8000/get_all_comments\"\r\n        })\r\n        this.comments = res.data\r\n        console.log(this.comments[0])\r\n        this.filenames = this.comments.map(it => it.filename)\r\n        this.filenames = Array.from(new Set(this.filenames))\r\n        // this.filename = this.filenames[0]\r\n        this.temp_comments = this.comments\r\n    },\r\n    methods: {\r\n        add(){\r\n            this.$emit(\"add\", this.chosen_filename, this.temp_comments[this.chosen_margin].id)\r\n        },\r\n        notsupported(){\r\n            console.log(\"not supported\")\r\n        },\r\n        notAlter(){\r\n            alert(\"you should not alter this\")\r\n        },\r\n        setChosenMargin(index, filename){\r\n            console.log(\"this\")\r\n            this.chosen_margin = index\r\n            this.chosen_filename = filename\r\n        },\r\n        search(){\r\n            if (this.type != \"all\") {\r\n                this.temp_comments = this.temp_comments.filter(it => it.type === this.type)\r\n            }\r\n        },\r\n        searchValidComments(){\r\n            if (this.filename != \"all\") {\r\n                if (this.type != \"all\"){\r\n                    this.temp_comments = this.comments.filter(it => it.filename == this.filename && it.type == this.type && it.content.includes(this.searchText))\r\n                } else {\r\n                    this.temp_comments = this.comments.filter(it => it.filename == this.filename && it.content.includes(this.searchText))\r\n                }\r\n            } else {\r\n                if (this.type != \"all\"){\r\n                    this.temp_comments = this.comments.filter(it => it.type == this.type && it.content.includes(this.searchText))\r\n                } else {\r\n                    this.temp_comments = this.comments.filter(it => it.content.includes(this.searchText))\r\n                }\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        filename: {\r\n            handler(){\r\n                this.searchValidComments()\r\n            }\r\n        },\r\n        type: {\r\n            handler(){\r\n                this.searchValidComments()\r\n            }\r\n        },\r\n        searchText: {\r\n            handler(){\r\n                this.searchValidComments()\r\n            }\r\n        },\r\n        chosen_margin(newVal, oldVal) {\r\n            console.log(newVal)\r\n            this.$refs.margin[newVal].classList.add(\"active-margin\")\r\n            if (oldVal != -1){\r\n                this.$refs.margin[oldVal].classList.remove(\"active-margin\")\r\n            }\r\n            // console.log(this.$refs.margin.querySelector(`.dialog[id=\"comment${newVal}\"]`))\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.comments{\r\n    position: relative;\r\n    height: 100%;\r\n    width: 100%;\r\n}\r\n.condition {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 30px;\r\n    width: 100%;\r\n    position: relative;\r\n    justify-content:left;\r\n    text-align: left;\r\n}\r\n\r\n.condition .condition-wrapper{\r\n    /* position: absolute; */\r\n    /* left: 0px; */\r\n    margin: 10px;\r\n}\r\n\r\n.condition .condition-wrapper span{\r\n    margin-right: 20px;\r\n}\r\n\r\n.comment-list{\r\n    position: absolute;\r\n    top: 100px;\r\n    /* left: 50%; */\r\n    height: 80%;\r\n    justify-content: center;\r\n    text-align:center;\r\n    margin-top: 10px;\r\n    width: 100%;\r\n    overflow: scroll;\r\n    /* transform: translateX(-350px); */\r\n}\r\n\r\n.comment-list .comment-wrapper{\r\n    display: flex;\r\n    flex-direction: row;\r\n    width: 100%;\r\n    height: 100%;\r\n    line-height: 100%;\r\n    justify-content: space-between;\r\n    margin-bottom: 100px;\r\n    margin-top: 100px;\r\n}\r\n\r\n.comment-list .comment-wrapper span{\r\n    margin-right: 50px;\r\n    width: 100%;\r\n}\r\n\r\n.footer{\r\n    position: absolute;\r\n    top: 90%;\r\n    height: 10%;\r\n    width: 100%;\r\n}\r\n\r\n.footer button{\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    width: 50px;\r\n    transform: translateX(-25px);\r\n}\r\n\r\n.active-margin{\r\n     box-shadow:0 15px 35px rgba(0,0,0,0.5);\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Comments.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Comments.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Comments.vue?vue&type=template&id=525db3bf&scoped=true\"\nimport script from \"./Comments.vue?vue&type=script&lang=js\"\nexport * from \"./Comments.vue?vue&type=script&lang=js\"\nimport style0 from \"./Comments.vue?vue&type=style&index=0&id=525db3bf&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"525db3bf\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","data","id","on","$event","setChosenMargin","_v","_s","position","type","displaySelectionPanel","domProps","content","edit","deleteComments","link","staticRenderFns","ref","style","hidden","addAnswer","answer","props","String","required","hide","Boolean","default","mounted","console","log","$refs","tag","classList","add","availableTypes","methods","$emit","computed","component","Object","filename","components","MarginType","e","currentTarget","parentNode","previousElementSibling","disabled","value","created","undefined","$route","path","directives","name","rawName","expression","filenames","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","multiple","_l","index","key","searchText","composing","temp_comments","refInFor","notAlter","staticStyle","comments","chosen_margin","chosen_filename","SingleMargin","res","axios","url","it","from","Set","notsupported","alert","search","searchValidComments","includes","watch","handler","newVal","oldVal","margin","remove"],"sourceRoot":""}